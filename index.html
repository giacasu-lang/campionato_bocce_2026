 <!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campionato Bocce 2026</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background-color: #f9f9f9; color: #333; }
        h1, h2, h3 { margin-top: 20px; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
        th { background-color: #e0e0e0; }
        .top-link { font-size: 0.9em; margin-bottom: 20px; display: block; }
        #admin-section { border: 2px solid #444; padding: 15px; margin-top: 30px; background-color: #eee; }
        #admin-content { margin-top: 15px; padding: 10px; border: 1px solid #aaa; background-color: #fff; }
        input { padding: 5px; margin-right: 5px; width: 80px; }
        button { padding: 5px 10px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>Campionato Bocce 2026</h1>

    <div id="content"></div>

    <h2>Calendario</h2>
    <div id="calendar"></div>

    <a href="#top" class="top-link">Torna in alto</a>
    <p>Powered by Gianni Casu</p>

    <!-- Inizio area amministrazione -->
    <div id="admin-section" style="display:block;">
      <h3>Area Amministratore</h3>
      <label>Password: <input type="password" id="admin-pass"></label>
      <button onclick="checkPassword()">Accedi</button>
     
      <div id="admin-content" style="display:none;">
        <p>Qui puoi aggiornare i dati (solo tu vedrai questa sezione)</p>
       
        <label for="select-cat">Seleziona categoria:</label>
        <select id="select-cat" onchange="mostraTabellaAdmin()">
            <option value="">--Scegli categoria--</option>
            <option value="seconda">Seconda Categoria</option>
            <option value="terza">Terza Categoria</option>
            <option value="juniores">Juniores</option>
            <option value="femminile">Femminile</option>
        </select>

        <div id="admin-table-container" style="margin-top:15px;"></div>
       
        <button onclick="salvaModifiche()" style="margin-top:10px;">Salva modifiche</button>
      </div>
    </div>
    <!-- Fine area amministrazione -->

    <script>
        // Password admin
        const correctPassword = "honor70lite";
        function checkPassword() {
            const pass = document.getElementById("admin-pass").value;
            if(pass === correctPassword){
                document.getElementById("admin-content").style.display = "block";
                alert("Accesso consentito");
            } else {
                alert("Password errata");
            }
        }

        // Dati classifiche e calendario
        const dati = {
          "seconda":[{"nome":"Gianni Casu","punti":30,"giocate":0,"vinte":0,"perse":0}],
          "terza":[{"nome":"Gianni Casu","punti":35,"giocate":0,"vinte":0,"perse":0}],
          "juniores":[{"nome":"Gianni Casu","punti":35,"giocate":0,"vinte":0,"perse":0}],
          "femminile":[],
          "calendario":[
            {"data":"2026-01-29T23:00:00.000Z","casa":"BORORE","ospite":"Nuoro B","campo":1,"categoria":"Seconda Categoria","punteggio":"2026-10-11T22:00:00.000Z"},
            {"data":"2026-01-30T23:00:00.000Z","casa":"borore","ospite":"oristano","campo":2,"categoria":"Terza Categoria","punteggio":"2026-12-14T23:00:00.000Z"}
          ]
        };

        // Funzione per creare le tabelle di categoria
        function creaTabellaCategoria(categoria, datiCategoria){
            const container = document.createElement("div");
            const h2 = document.createElement("h2");
            h2.textContent = categoria;
            container.appendChild(h2);

            if(datiCategoria.length === 0){
                const p = document.createElement("p");
                p.textContent = "Nessun dato disponibile";
                container.appendChild(p);
            } else {
                const table = document.createElement("table");
                const tr = document.createElement("tr");
                ["nome","punti","giocate","vinte","perse"].forEach(col => {
                    const th = document.createElement("th");
                    th.textContent = col;
                    tr.appendChild(th);
                });
                table.appendChild(tr);

                datiCategoria.forEach(r => {
                    const tr = document.createElement("tr");
                    ["nome","punti","giocate","vinte","perse"].forEach(col => {
                        const td = document.createElement("td");
                        td.textContent = r[col];
                        tr.appendChild(td);
                    });
                    table.appendChild(tr);
                });

                container.appendChild(table);
            }

            const topLink = document.createElement("a");
            topLink.href="#top";
            topLink.className="top-link";
            topLink.textContent="Torna in alto";
            container.appendChild(topLink);

            document.getElementById("content").appendChild(container);
        }

        // Crea tutte le categorie tranne calendario
        Object.keys(dati).forEach(cat => {
            if(cat !== "calendario"){
                creaTabellaCategoria(cat.charAt(0).toUpperCase() + cat.slice(1), dati[cat]);
            }
        });

        // Funzione per creare il calendario
        function creaCalendario(cal){
            const container = document.getElementById("calendar");
            const table = document.createElement("table");
            const tr = document.createElement("tr");
            ["data","casa","ospite","campo","categoria","punteggio"].forEach(col => {
                const th = document.createElement("th");
                th.textContent = col;
                tr.appendChild(th);
            });
            table.appendChild(tr);

            cal.forEach(r => {
                const tr = document.createElement("tr");
                ["data","casa","ospite","campo","categoria","punteggio"].forEach(col => {
                    const td = document.createElement("td");
                    td.textContent = r[col];
                    tr.appendChild(td);
                });
                table.appendChild(tr);
            });

            container.appendChild(table);
        }

        creaCalendario(dati.calendario);

        // --- FUNZIONI ADMIN ---
        let categoriaSelezionata = "";

        function mostraTabellaAdmin(){
            categoriaSelezionata = document.getElementById("select-cat").value;
            const container = document.getElementById("admin-table-container");
            container.innerHTML = "";

            if(categoriaSelezionata && dati[categoriaSelezionata]){
                const table = document.createElement("table");
                const tr = document.createElement("tr");
                ["nome","punti","giocate","vinte","perse"].forEach(col => {
                    const th = document.createElement("th");
                    th.textContent = col;
                    tr.appendChild(th);
                });
                table.appendChild(tr);

                dati[categoriaSelezionata].forEach((r, idx) => {
                    const tr = document.createElement("tr");
                    ["nome","punti","giocate","vinte","perse"].forEach(col => {
                        const td = document.createElement("td");
                        const input = document.createElement("input");
                        input.value = r[col];
                        input.dataset.idx = idx;
                        input.dataset.col = col;
                        td.appendChild(input);
                        tr.appendChild(td);
                    });
                    table.appendChild(tr);
                });

                container.appendChild(table);
            }
        }

        function salvaModifiche(){
            const inputs = document.querySelectorAll("#admin-table-container input");
            inputs.forEach(input => {
                const idx = input.dataset.idx;
                const col = input.dataset.col;
                dati[categoriaSelezionata][idx][col] = input.value;
            });
            alert("Modifiche salvate!");
            document.getElementById("content").innerHTML = "";
            Object.keys(dati).forEach(cat => {
                if(cat !== "calendario"){
                    creaTabellaCategoria(cat.charAt(0).toUpperCase() + cat.slice(1), dati[cat]);
                }
            });
        }
    </script>
</body>
</html>
